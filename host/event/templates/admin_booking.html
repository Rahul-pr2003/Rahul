<!DOCTYPE html>
<html lang="en">
<style>
    .reg {
    position:relative;
    width:400px;
    height:
    background:transparent;
    border: 2px solid rgba(255,255,255,.5);
    border-radius:20px;
    backdrop-filter:blur(20px);
    box-shadow:0 0 30px rgba(0,0,0,.5);
    display:flex;
    align:center;
    justify-content:center;
    align-items: center;
    overflow: hidden;
    transition: height .2s ease;
    }


    .reg btn{
    width:100%;
    font-size:20px;
    margin-bottom:10px;
    padding:10px;
       }

    table {
    width: 100%;
          border-collapse: collapse;

           font-size: 16px;
        }

        thead tr {
            background-color: #007BFF;
            color: #ffffff;
        }

        th, td {
            padding: 12px;
            text-align: left;
            border: 1px solid #dddddd;
        }

        tbody tr:nth-child(even) {
            background-color: #f2f2f2;
        }

        tbody tr:hover {
            background-color: #e9f5ff;
        }

        th {
            text-transform: uppercase;
            font-weight: bold;
        }

        .status {
            font-weight: bold;
        }

        .status.completed {
            color: blue;
        }

        .status.pending {
            color: orange;
        }

        .status.cancelled {
            color: red;
        }
        .status.confirmed {
            color: green;
        }
        @media (max-width: 768px) {
            table {
                font-size: 14px;
            }

            th, td {
                padding: 10px;
            }
        }

.booking-form-container {
    width: 80%;
    max-width: 600px;
    margin: 30px auto;
    background-color: #fff;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.form-title {
    text-align: center;
    color: #333;
    font-size: 24px;
    margin-bottom: 20px;
}

.filter-form {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.form-group {
    display: flex;
    flex-direction: column;
}

.form-input,
.form-select {
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 4px;
    font-size: 16px;
    outline: none;
    width: 100%;
    transition: border-color 0.3s;
}

.form-input:focus,
.form-select:focus {
    border-color: #007bff;
}

.submit-btn {
    padding: 12px 20px;
    background-color: #007bff;
    color: white;
    border: none;
    border-radius: 4px;
    font-size: 16px;
    cursor: pointer;
    transition: background-color 0.3s;
    align-self: center;
}

.submit-btn:hover {
    background-color: #0056b3;
}

/* Responsive Design */
@media (max-width: 768px) {
    .booking-form-container {
        width: 90%;
        padding: 15px;
    }
}
</style>
<head>
    {% load static %}
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- mobile metas -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1">
    <!-- site metas -->
    <title>2rings</title>
    <meta name="keywords" content="">
    <meta name="description" content="">
    <meta name="author" content="">
    <!-- bootstrap css -->
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <!-- style css -->
    <link rel="stylesheet" href="{% static 'css/new.css' %}">
    <!-- Responsive-->
    <link rel="stylesheet" href="{% static 'css/responsive.css' %}">
    <!-- fevicon -->
    <link rel="icon" href="{% static 'images/fevicon.png' %}" type="image/gif"/>
    <!-- Scrollbar Custom CSS -->
    <link rel="stylesheet" href="{% static 'css/jquery.mCustomScrollbar.min.css' %}">
    <!-- Tweaks for older IEs-->
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css"
          media="screen">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.1/css/all.min.css"
          integrity="sha512-5Hs3dF2AEPkpNAR7UiOHba+lRSJNeM2ECkwxUIxC1Q/FLycGTbNapWXB4tP889k5T5Ju8fs4b1P5z/iB4nMfSQ=="
          crossorigin="anonymous" referrerpolicy="no-referrer"/>
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]-->
</head>
<!-- body -->
<!--   <body class="main-layout inner_page">-->
<!-- loader  -->
<!--      <div class="loader_bg">-->
<!--         <div class="loader"><img src="{% static 'images/loading.gif' %}" alt="#"/></div>-->
<!--      </div>-->
<!-- end loader -->
<!-- header -->
<!--      duply-->
<body class="main-layout">
<header class="full_bg2 ">
    <!-- header inner -->
    <div class="header">
        <div class="container">
            <div class="row">
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-3 col logo_section">
                    <div class="full">
                        <div class="center-desk">
                            <div class="logo">
                                <a href="index">2Rings</a>
                                <img src="{% static 'images/ring.png' %}" alt="#"/>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-xl-9 col-lg-9 col-md-9 col-sm-9">
                    <nav class="navigation navbar navbar-expand-md navbar-dark ">
                        <button class="navbar-toggler" type="button" data-toggle="collapse"
                                data-target="#navbarsExample04" aria-controls="navbarsExample04" aria-expanded="false"
                                aria-label="Toggle navigation">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                        <div class="collapse navbar-collapse" id="navbarsExample04">
                            <ul class="navbar-nav mr-auto">
                                <li class="nav-item">
                                    <a class="nav-link" href="ad_account">Home</a>
                                </li>
                                <li class="nav-item ">
                                    <a class="nav-link" href="ad_service">Manage Events</a>
                                    <ul class="dropdown">
                                        <li><a href="add_partners">Add Partners</a></li>
                                        <li><a href="ad_wed">wedding planner</a></li>
                                        <li><a href="ad_parties">Private Parties</a></li>
                                        <li><a href="ad_music">Music & Entertainments</a></li>
                                        <li><a href="ad_stories">stories by 2Rings</a></li>
                                        <li><a href="ad_resorts">wedding venues</a></li>
                                        <li><a href="ad_gallery">Photo Gallery</a></li>
                                    </ul>
                                </li>
                                <li class="nav-item active">
                                    <a class="nav-link" href="admin_booking">Bookings</a>
                                    <ul>
                                        <li><a href="ad_bookings">Booking Details</a></li>
                                    </ul>
                                </li>
                                <li class="nav-item ">
                                    <a class="nav-link" href="user_details">User Details</a>
                                </li>
                                <li class="head"><a class="nav-link" href="ad_profile">
                                    <ion-icon class="fas fa-user" name="person"></ion-icon>
                                </a></li>
                            </ul>
                        </div>
                    </nav>
                </div>
            </div>
        </div>
    </div>
    <!-- end header inner -->
    <!-- end header -->
    <!-- banner -->
    <!--         .-->
    <section class="banner_po">
        <header class="banner_main ">
            <div id="myCarousel" class="carousel slide banner" data-ride="carousel">
                <ol class="carousel-indicators1">
                    <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
                    <li data-target="#myCarousel" data-slide-to="1"></li>
                    <li data-target="#myCarousel" data-slide-to="2"></li>
                </ol>
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <div class="container">
                            <div class="carousel-caption  banner_po">
                                <div class="row">
                                    <div class="col-lg-8 col-md-9 ">
                                        <div class="build_box" style="padding:0px;">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="body">
                        <div class="reg">
                            <div class="form-box login">
                                <h2>Create a New Booking</h2>

                                <!-- Display any success or error messages -->
                                {% if messages %}
                                <div class="messages">
                                    {% for message in messages %}
                                    <div class="alert {% if message.tags %}alert-{{ message.tags }}{% endif %}">
                                        {{ message }}
                                    </div>
                                    {% endfor %}
                                </div>
                                {% endif %}
                                <!-- Booking form -->
<!--                                <form method="POST">-->
<!--                                    {% csrf_token %}-->
<!--                                    {{ form.as_p }}  &lt;!&ndash; Render form fields as paragraph elements &ndash;&gt;-->
<!--                                    <button type="submit" class="btn btn-primary">Create Booking</button>-->
<!--                                </form>-->
                                <form action="" method="POST">
                                    {% csrf_token %}
                                    <div class="input-box" style="color:white;">
                                        Event : {{ form.booking }}
                                    </div>
                                    <div class="input-box" style="color:white;">
                                        Tailor : {{ form.tailor }}
                                    </div>
                                    <div class="input-box" style="color:white;">
                                        Catering :{{ form.catering }}
                                    </div>
                                    <div class="input-box" style="color:white;">
                                        Entertainer :{{ form.entertainer }}
                                    </div>
                                    <button type="submit" class="btn btn-primary">book now</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                <a class="carousel-control-prev" href="#myCarousel" role="button" data-slide="prev">
                    <i class="fa fa-angle-left" aria-hidden="true"></i>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#myCarousel" role="button" data-slide="next">
                    <i class="fa fa-angle-right" aria-hidden="true"></i>
                    <span class="sr-only">Next</span>
                </a>
            </div>
        </header>
    </section>
</header>
<!-- play -->
<div class="section">
    <div class="container">
        <div class="row">
            <div class="col-md-8 offset-md-2 col-sm-8 offset-sm-2">
                <div class="play_btn text_align_center">
                    <img src="{% static 'images/play.png' %}" alt="#"/>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- end play -->
<!--  contact -->
<div class="booking-form-container">
    <h1 class="form-title">Booking Confirmation</h1>
    <form method="GET" action="" class="filter-form">
        <!-- Search Field -->
        <div class="form-group">
            <input type="text" name="q" placeholder="Search" value="{{ query }}" class="form-input">
        </div>

        <!-- Status Filter -->
        <div class="form-group">
            <select name="status" class="form-select">
                <option value="">--Select Status--</option>
                <option value="confirmed"2{% if status_filter == 'confirmed' %}selected{% endif %}>Confirmed</option>
                <option value="pending" {% if status_filter == 'pending' %}selected{% endif %}>Pending</option>
                <option value="cancelled" {% if status_filter == 'cancelled' %}selected{% endif %}>Cancelled</option>
            </select>
        </div>

        <!-- Date Filter -->
        <div class="form-group">
            <select name="booking_date" class="form-select">
                <option value="">--Select Date Range--</option>
                <option value="today" {% if date_filter == 'today' %}selected{% endif %}>Today</option>
                <option value="this_week" {% if date_filter == 'this_week' %}selected{% endif %}>This Week</option>
                <option value="this_month" {% if date_filter == 'this_month' %}selected{% endif %}>This Month</option>
                <option value="this_year" {% if date_filter == 'this_year' %}selected{% endif %}>This Year</option>
            </select>
        </div>

        <button type="submit" class="submit-btn">Filter</button>
    </form>
</div>


<div class="container">
    <table>
        <thead>
        <tr>
            <th>Username</th>
            <th>Booking</th>
            <th>Address</th>
            <th>Booking Date</th>
            <th>Status</th>
            <th>Tailor</th>
            <th>Caterer</th>
            <th>Entertainer</th>
            <th>Booked On</th>
        </tr>
        </thead>
        <tbody>
        {% for i in data %}
        <tr>
            <td>{{ i.booking.user_details.username }}</td>
            <td>{{ i.booking.event }}</td>
            <td>{{ i.booking.address }}</td>
            <td>{{ i.booking.booking_date }}</td>
            <td class="status {{ i.status | lower }}">
                {% if i.status == "pending" %}
                Pending
                {% elif i.status == "cancelled" %}
                Cancelled
                {% elif i.status == "confirmed" %}
                Confirmed
                {% elif i.status == "completed" %}
                Completed
                {% elif not i.tailor_status and not i.caterer_status and not i.entertainer_status %}
                No Status
                {% else %}
                In Progress
                {% endif %}
            </td>
           <td class="status {{ i.tailor_status | lower }}">
    {% if i.tailor_status == 'nil' %}
        Not Assigned
    {% elif i.tailor %}
        {{ i.tailor }}<br>{{ i.tailor_status }}
    {% endif %}

    {% if i.tailor_status == 'cancelled' %}
        <!-- Allow admin to select a new tailor -->
        <form method="post" action="{% url 'change_tailor' i.pk %}">
            {% csrf_token %}
            <label for="tailor">Select New Tailor:</label>
            <select name="tailor" id="tailor">
                <option value="">--- Select Tailor ---</option>
                {% for tailor in tailors %}
                    <option value="{{ tailor.id }}" {% if tailor == i.tailor %}selected{% endif %}>{{ tailor.name }}</option>
                {% endfor %}
            </select>
            <button type="submit" class="btn btn-success">Assign New Tailor</button>
        </form>
    {% endif %}
</td>

<td class="status {{ i.caterer_status | lower }}">
    {% if i.caterer_status == 'nil' %}
        Not Assigned
    {% elif i.catering %}
        {{ i.catering }}<br>{{ i.caterer_status }}
    {% endif %}

    {% if i.caterer_status == 'cancelled' %}
        <!-- Allow admin to select a new caterer -->
        <form method="post" action="{% url 'change_caterer' i.pk %}">
            {% csrf_token %}
            <label for="caterer">Select New Caterer:</label>
            <select name="caterer" id="caterer">
                <option value="">--- Select Caterer ---</option>
                {% for caterer in caterers %}
                    <option value="{{ caterer.id }}" {% if caterer == i.catering %}selected{% endif %}>{{ caterer.name }}</option>
                {% endfor %}
            </select>
            <button type="submit" class="btn btn-success">Assign New Caterer</button>
        </form>
    {% endif %}
</td>

<td class="status {{ i.entertainer_status | lower }}">
    {% if i.entertainer_status == 'nil' %}
        Not Assigned
    {% elif i.entertainer %}
        {{ i.entertainer }}<br>{{ i.entertainer_status }}
    {% endif %}

    {% if i.entertainer_status == 'cancelled' %}
        <!-- Allow admin to select a new entertainer -->
        <form method="post" action="{% url 'change_entertainer' i.pk %}">
            {% csrf_token %}
            <label for="entertainer">Select New Entertainer:</label>
            <select name="entertainer" id="entertainer">
                <option value="">--- Select Entertainer ---</option>
                {% for entertainer in entertainers %}
                    <option value="{{ entertainer.id }}" {% if entertainer == i.entertainer %}selected{% endif %}>{{ entertainer.name }}</option>
                {% endfor %}
            </select>
            <button type="submit" class="btn btn-success">Assign New Entertainer</button>
        </form>
    {% endif %}
</td>
            <td>{{ i.booked_on }}</td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
<!-- end contact -->
<!--  footer -->
<footer>
    <div class="colo">
        <h1>2Rings</h1>
        <img src="{% static 'images/ring.png' %}" alt="#" class="logo1"/>
        <p>Planning a full event has never been easier!</p>
        <p>2Rings® Events is an ISO 9001:2015 Certified Event Management Company based in Kerala, India, offering
            various services to make your events stress-free and memorable. From premium corporate events and
            destination wedding planning to small-scale birthday parties and private gatherings, you can be sure we
            have
            it all covered. With offices in Kochi, Thrissur, Calicut, and Trivandrum, we specialize in weddings,
            corporate events, private parties, and occasions specifically for Keralites and Malayalees.</p>
    </div>
    <div class="footercontainer">
        <p style="color:red; text-align:center;">follow us on social medias</p>
        <div class="socialicons">
            <a href=""><i class="fa-brands fa-facebook"></i></a>
            <a href="https://www.instagram.com/_rahul._.pr_?igsh=MWRzc3JtYTRldnVzbA=="><i
                    class="fa-brands fa-instagram"></i></a>
            <a href=""><i class="fa-brands fa-twitter"></i></a>
            <a href=""><i class="fa-brands fa-youtube"></i></a>
            <a href=""><i class="fa-brands fa-google-plus"></i></a>
        </div>
        <div class="footer_nav">
            <ul>
                <li><a href="ad_account">Home</a></li>
                <li><a href="#">about us</a></li>
                <li><a href="#">service</a></li>
                <li><a href="#">blog</a></li>
                <li><a href="#">contact us</a></li>
            </ul>
        </div>
        <div class="footerbottom">
            <p>+918484729282--gmail:<a href="#">rahul@gmail.com</a></p>
        </div>
    </div>
</footer>
<!-- end footer -->
<!-- Javascript files-->
<script src="{% static 'js/script.js' %}"></script>
<script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
<script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
<script src="{% static 'js/jquery.min.js' %}"></script>
    <script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>
    <script src="{% static 'js/jquery-3.0.0.min.js' %}"></script>
    <!-- sidebar -->
    <script src="{% static 'js/jquery.mCustomScrollbar.concat.min.js' %}"></script>
    <script src="{% static 'js/custom.js' %}"></script>
</div>
</body>
</html>